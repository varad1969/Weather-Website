<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeatherPro - Professional Weather Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root[data-theme="corporate"] {
            --primary-gradient: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            --secondary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --glass-bg: rgba(255, 255, 255, 0.12);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.9);
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent-color: #4facfe;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        :root[data-theme="executive"] {
            --primary-gradient: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            --secondary-gradient: linear-gradient(135deg, #2d3561 0%, #c850c0 50%, #ffcc70 100%);
            --success-gradient: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            --warning-gradient: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.85);
            --text-muted: rgba(255, 255, 255, 0.6);
            --accent-color: #00d2ff;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.5);
        }

        :root[data-theme="platinum"] {
            --primary-gradient: linear-gradient(135deg, #232526 0%, #414345 100%);
            --secondary-gradient: linear-gradient(135deg, #bdc3c7 0%, #2c3e50 100%);
            --success-gradient: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            --warning-gradient: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.9);
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent-color: #74b9ff;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        :root[data-theme="midnight"] {
            --primary-gradient: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #2d2d2d 100%);
            --secondary-gradient: linear-gradient(135deg, #434343 0%, #000000 100%);
            --success-gradient: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
            --warning-gradient: linear-gradient(135deg, #ff8008 0%, #ffc837 100%);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --text-muted: rgba(255, 255, 255, 0.5);
            --accent-color: #56ab2f;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.7);
        }

        :root[data-theme="royal"] {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.25);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.9);
            --text-muted: rgba(255, 255, 255, 0.7);
            --accent-color: #f093fb;
            --shadow: 0 8px 32px rgba(102, 126, 234, 0.2);
            --shadow-hover: 0 15px 40px rgba(102, 126, 234, 0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-gradient);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Advanced Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-animation {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .weather-loader {
            position: relative;
            width: 100px;
            height: 100px;
        }

        .loader-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-top: 3px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
        }

        .loader-ring:nth-child(2) {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border-top-color: var(--text-secondary);
            animation-duration: 2s;
            animation-direction: reverse;
        }

        .loader-ring:nth-child(3) {
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
            border-top-color: var(--accent-color);
            animation-duration: 1s;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            animation: pulse 2s ease-in-out infinite;
        }

        .loading-dots {
            display: flex;
            gap: 8px;
        }

        .loading-dot {
            width: 8px;
            height: 8px;
            background: var(--accent-color);
            border-radius: 50%;
            animation: bounce 1.4s ease-in-out infinite both;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Enhanced Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(10px);
            animation: float 8s ease-in-out infinite;
        }

        .shape-1 { width: 120px; height: 120px; top: 10%; left: 5%; animation-delay: 0s; }
        .shape-2 { width: 80px; height: 80px; top: 70%; right: 10%; animation-delay: 2s; }
        .shape-3 { width: 100px; height: 100px; bottom: 20%; left: 15%; animation-delay: 4s; }
        .shape-4 { width: 60px; height: 60px; top: 30%; right: 25%; animation-delay: 1s; }
        .shape-5 { width: 140px; height: 140px; bottom: 5%; right: 5%; animation-delay: 3s; }
        .shape-6 { width: 90px; height: 90px; top: 50%; left: 8%; animation-delay: 5s; }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg) scale(1); 
                opacity: 0.6; 
            }
            33% { 
                transform: translateY(-30px) rotate(120deg) scale(1.1); 
                opacity: 0.8; 
            }
            66% { 
                transform: translateY(-15px) rotate(240deg) scale(0.9); 
                opacity: 1; 
            }
        }

        /* Particle System */
        .particle-system {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: particleFloat 6s linear infinite;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Enhanced Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            animation: slideDown 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 2.8rem;
            font-weight: 800;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            position: relative;
        }

        .logo::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--accent-color);
            transition: width 0.8s ease;
        }

        .logo:hover::after {
            width: 100%;
        }

        .logo-icon {
            font-size: 3.2rem;
            animation: logoRotate 8s linear infinite;
            filter: drop-shadow(0 0 20px var(--accent-color));
        }

        @keyframes logoRotate {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-left: 60px;
            font-weight: 500;
            animation: fadeInUp 1s ease 0.5s both;
        }

        /* Enhanced Controls */
        .controls {
            display: flex;
            align-items: center;
            gap: 20px;
            animation: slideLeft 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
        }

        /* Professional Theme Selector */
        .theme-selector {
            position: relative;
        }

        .theme-btn {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 18px;
            padding: 14px 20px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .theme-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s ease;
        }

        .theme-btn:hover::before {
            left: 100%;
        }

        .theme-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px) scale(1.05);
            box-shadow: var(--shadow-hover);
        }

        .theme-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 15px;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 15px;
            min-width: 280px;
            display: none;
            z-index: 1000;
            box-shadow: var(--shadow);
            animation: dropdownSlide 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .theme-dropdown.show {
            display: block;
        }

        @keyframes dropdownSlide {
            0% {
                opacity: 0;
                transform: translateY(-20px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .theme-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 8px;
            position: relative;
            overflow: hidden;
        }

        .theme-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.5s ease;
        }

        .theme-option:hover::before {
            left: 100%;
        }

        .theme-option:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(8px);
        }

        .theme-preview {
            width: 24px;
            height: 24px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .theme-preview::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .theme-preview.corporate { background: linear-gradient(135deg, #1e3c72, #2a5298); }
        .theme-preview.executive { background: linear-gradient(135deg, #0f0f23, #16213e); }
        .theme-preview.platinum { background: linear-gradient(135deg, #232526, #414345); }
        .theme-preview.midnight { background: linear-gradient(135deg, #0c0c0c, #2d2d2d); }
        .theme-preview.royal { background: linear-gradient(135deg, #667eea, #764ba2); }

        .theme-name {
            font-weight: 600;
            font-size: 1rem;
        }

        .theme-description {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        /* Enhanced Personal Weather Toggle */
        .personal-weather-toggle {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 18px;
            padding: 14px 20px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .personal-weather-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
            opacity: 0.3;
            transition: left 0.6s ease;
        }

        .personal-weather-toggle:hover::before {
            left: 100%;
        }

        .personal-weather-toggle:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: var(--shadow-hover);
        }

        .personal-weather-toggle.active {
            background: var(--accent-color);
            box-shadow: 0 0 30px rgba(79, 172, 254, 0.4);
            animation: activeGlow 2s ease-in-out infinite alternate;
        }

        @keyframes activeGlow {
            0% { box-shadow: 0 0 20px rgba(79, 172, 254, 0.4); }
            100% { box-shadow: 0 0 40px rgba(79, 172, 254, 0.6); }
        }

        /* Enhanced Search Section */
        .search-section {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 35px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
            animation: slideUp 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
            position: relative;
            overflow: hidden;
        }

        .search-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.8s ease;
        }

        .search-section:hover::before {
            left: 100%;
        }

        .search-container {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-bottom: 25px;
        }

        .search-box {
            flex: 1;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 20px 30px 20px 60px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.15);
            color: var(--text-primary);
            font-size: 16px;
            font-family: inherit;
            font-weight: 500;
            outline: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .search-input::placeholder {
            color: var(--text-muted);
            font-weight: 400;
        }

        .search-input:focus {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.02);
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.3), var(--shadow);
        }

        .search-icon {
            position: absolute;
            left: 22px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 1.3rem;
            animation: searchPulse 3s ease-in-out infinite;
        }

        @keyframes searchPulse {
            0%, 100% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-50%) scale(1.1); }
        }

        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            margin-top: 12px;
            max-height: 350px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: var(--shadow);
            animation: suggestionsSlide 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes suggestionsSlide {
            0% {
                opacity: 0;
                transform: translateY(-10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .suggestion-item {
            padding: 18px 25px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .suggestion-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.4s ease;
        }

        .suggestion-item:hover::before {
            left: 100%;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(8px);
        }

        .search-btn, .location-btn {
            padding: 20px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .search-btn {
            background: var(--accent-color);
            color: white;
        }

        .location-btn {
            background: var(--glass-bg);
            color: var(--text-primary);
            border: 1px solid var(--glass-border);
        }

        .search-btn::before, .location-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.4s ease, height 0.4s ease;
        }

        .search-btn:hover::before, .location-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .search-btn:hover, .location-btn:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-hover);
        }

        .search-btn:hover {
            background: #3d8bfe;
        }

        .location-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        /* Enhanced Quick Search Tags */
        .quick-search {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .quick-tag {
            padding: 10px 18px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .quick-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--accent-color);
            transition: left 0.4s ease;
            z-index: -1;
        }

        .quick-tag:hover::before {
            left: 0;
        }

        .quick-tag:hover {
            transform: translateY(-3px) scale(1.05);
            color: white;
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.3);
        }

        /* Enhanced Main Weather Card */
        .main-weather {
            background: linear-gradient(135deg, var(--glass-bg), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            border-radius: 35px;
            padding: 50px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
            animation: slideUp 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.6s both;
            position: relative;
            overflow: hidden;
        }

        .main-weather::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.03), transparent);
            transform: rotate(45deg);
            animation: shimmer 4s linear infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .weather-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 40px;
        }

        .location-info h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% { filter: drop-shadow(0 0 5px rgba(79, 172, 254, 0.3)); }
            100% { filter: drop-shadow(0 0 15px rgba(79, 172, 254, 0.6)); }
        }

        .location-info p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .coordinates {
            font-size: 0.95rem;
            color: var(--text-muted);
            font-weight: 400;
        }

        .weather-icon-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .weather-icon-main {
            font-size: 7rem;
            animation: weatherFloat 4s ease-in-out infinite;
            filter: drop-shadow(0 15px 30px rgba(255, 167, 38, 0.4));
            position: relative;
            z-index: 2;
        }

        @keyframes weatherFloat {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg) scale(1); 
            }
            25% { 
                transform: translateY(-15px) rotate(5deg) scale(1.05); 
            }
            50% { 
                transform: translateY(-10px) rotate(0deg) scale(1.1); 
            }
            75% { 
                transform: translateY(-15px) rotate(-5deg) scale(1.05); 
            }
        }

        .weather-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 167, 38, 0.3), transparent);
            animation: weatherGlow 3s ease-in-out infinite alternate;
            z-index: 1;
        }

        @keyframes weatherGlow {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.5;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.3);
                opacity: 0.8;
            }
        }

        .temperature-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .temperature-main {
            display: flex;
            align-items: flex-start;
            gap: 25px;
        }

        .current-temp {
            font-size: 7rem;
            font-weight: 200;
            line-height: 1;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: temperaturePulse 5s ease-in-out infinite;
            position: relative;
        }

        @keyframes temperaturePulse {
            0%, 100% { 
                transform: scale(1);
                filter: drop-shadow(0 0 10px rgba(79, 172, 254, 0.3));
            }
            50% { 
                transform: scale(1.05);
                filter: drop-shadow(0 0 20px rgba(79, 172, 254, 0.6));
            }
        }

        .temp-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .unit-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 10px 15px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.95rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .unit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--accent-color);
            transition: left 0.4s ease;
            z-index: -1;
        }

        .unit-btn.active::before, .unit-btn:hover::before {
            left: 0;
        }

        .unit-btn.active, .unit-btn:hover {
            color: white;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
        }

        .weather-description {
            text-align: right;
        }

        .weather-description h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            text-transform: capitalize;
            animation: fadeInRight 1s ease 0.8s both;
        }

        .feels-like {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-bottom: 18px;
            font-weight: 500;
            animation: fadeInRight 1s ease 1s both;
        }

        .weather-tag {
            background: var(--success-gradient);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 0.95rem;
            font-weight: 600;
            display: inline-block;
            animation: tagPulse 4s ease-in-out infinite;
            box-shadow: 0 5px 15px rgba(17, 153, 142, 0.3);
        }

        @keyframes tagPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 5px 15px rgba(17, 153, 142, 0.3);
            }
            50% { 
                transform: scale(1.1);
                box-shadow: 0 8px 25px rgba(17, 153, 142, 0.5);
            }
        }

        /* Enhanced Weather Details Grid */
        .weather-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .detail-card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 30px;
            display: flex;
            align-items: center;
            gap: 25px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow);
            animation: slideUp 1.2s cubic-bezier(0.4, 0, 0.2, 1) calc(0.8s + var(--delay)) both;
            position: relative;
            overflow: hidden;
        }

        .detail-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.6s ease;
        }

        .detail-card:hover::before {
            left: 100%;
        }

        .detail-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-hover);
        }

        .detail-icon {
            width: 70px;
            height: 70px;
            background: var(--success-gradient);
            border-radius: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            box-shadow: 0 8px 20px rgba(79, 172, 254, 0.3);
            animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .detail-content {
            flex: 1;
        }

        .detail-label {
            color: var(--text-secondary);
            font-size: 1.05rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .detail-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            animation: valueCount 2s ease-out;
        }

        @keyframes valueCount {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        .detail-progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: var(--success-gradient);
            border-radius: 4px;
            transition: width 2s cubic-bezier(0.4, 0, 0.2, 1);
            animation: progressGlow 3s ease-in-out infinite alternate;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progressShine 2s ease-in-out infinite;
        }

        @keyframes progressGlow {
            0% { box-shadow: 0 0 10px rgba(79, 172, 254, 0.5); }
            100% { box-shadow: 0 0 20px rgba(79, 172, 254, 0.8); }
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Enhanced Forecast Section */
        .forecast-section {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 35px;
            padding: 45px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
            animation: slideUp 1.2s cubic-bezier(0.4, 0, 0.2, 1) 1.2s both;
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 35px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 18px;
            animation: titleSlide 1s ease 1.4s both;
        }

        @keyframes titleSlide {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
        }

        .forecast-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: slideUp 1s cubic-bezier(0.4, 0, 0.2, 1) calc(1.6s + var(--delay)) both;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--glass-border);
        }

        .forecast-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.05), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
        }

        .forecast-card:hover::before {
            opacity: 1;
            animation: shimmer 1s linear;
        }

        .forecast-card:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: var(--shadow-hover);
            background: rgba(255, 255, 255, 0.18);
        }

        .forecast-day {
            font-weight: 700;
            margin-bottom: 18px;
            font-size: 1.2rem;
            animation: fadeInUp 0.8s ease calc(1.8s + var(--delay)) both;
        }

        .forecast-icon {
            font-size: 3.5rem;
            margin: 20px 0;
            animation: forecastFloat 4s ease-in-out infinite;
        }

        @keyframes forecastFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-8px) rotate(5deg); }
            50% { transform: translateY(-5px) rotate(0deg); }
            75% { transform: translateY(-8px) rotate(-5deg); }
        }

        .forecast-temps {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        .temp-high {
            font-weight: 800;
            font-size: 1.4rem;
            animation: tempSlideLeft 0.8s ease calc(2s + var(--delay)) both;
        }

        .temp-low {
            color: var(--text-secondary);
            font-size: 1.2rem;
            font-weight: 600;
            animation: tempSlideRight 0.8s ease calc(2s + var(--delay)) both;
        }

        @keyframes tempSlideLeft {
            0% {
                opacity: 0;
                transform: translateX(-20px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes tempSlideRight {
            0% {
                opacity: 0;
                transform: translateX(20px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Enhanced Animations */
        @keyframes slideDown {
            0% {
                opacity: 0;
                transform: translateY(-80px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            0% {
                opacity: 0;
                transform: translateY(80px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideLeft {
            0% {
                opacity: 0;
                transform: translateX(80px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInRight {
            0% {
                opacity: 0;
                transform: translateX(30px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Set animation delays */
        .detail-card:nth-child(1) { --delay: 0s; }
        .detail-card:nth-child(2) { --delay: 0.1s; }
        .detail-card:nth-child(3) { --delay: 0.2s; }
        .detail-card:nth-child(4) { --delay: 0.3s; }
        .detail-card:nth-child(5) { --delay: 0.4s; }
        .detail-card:nth-child(6) { --delay: 0.5s; }

        .forecast-card:nth-child(1) { --delay: 0s; }
        .forecast-card:nth-child(2) { --delay: 0.1s; }
        .forecast-card:nth-child(3) { --delay: 0.2s; }
        .forecast-card:nth-child(4) { --delay: 0.3s; }
        .forecast-card:nth-child(5) { --delay: 0.4s; }
        .forecast-card:nth-child(6) { --delay: 0.5s; }
        .forecast-card:nth-child(7) { --delay: 0.6s; }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container { padding: 15px; }
            .header { flex-direction: column; gap: 25px; text-align: center; }
            .controls { flex-wrap: wrap; justify-content: center; }
            .search-container { flex-direction: column; }
            .weather-header { flex-direction: column; text-align: center; gap: 30px; }
            .temperature-section { flex-direction: column; text-align: center; gap: 30px; }
            .current-temp { font-size: 5rem; }
            .weather-icon-main { font-size: 5rem; }
            .weather-details { grid-template-columns: 1fr; }
            .forecast-grid { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
        }

        @media (max-width: 480px) {
            .main-weather { padding: 35px 25px; }
            .detail-card { padding: 25px; }
            .forecast-card { padding: 25px; }
            .current-temp { font-size: 4.5rem; }
            .weather-icon-main { font-size: 4.5rem; }
            .logo { font-size: 2.2rem; }
            .logo-icon { font-size: 2.5rem; }
        }

        /* Smooth transitions for theme changes */
        * {
            transition: background-color 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                       color 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                       border-color 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-animation">
            <div class="weather-loader">
                <div class="loader-ring"></div>
                <div class="loader-ring"></div>
                <div class="loader-ring"></div>
            </div>
            <div class="loading-text">Loading Weather Data</div>
            <div class="loading-dots">
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
            </div>
        </div>
    </div>

    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
            <div class="shape shape-4"></div>
            <div class="shape shape-5"></div>
            <div class="shape shape-6"></div>
        </div>
        <div class="particle-system" id="particleSystem"></div>
    </div>

    <div class="container">
        <!-- Header with Controls -->
        <header class="header">
            <div class="logo-section">
                <div class="logo">
                    <i class="fas fa-cloud-sun logo-icon"></i>
                    <span>WeatherPro</span>
                </div>
                <p class="subtitle">Professional Global Weather Intelligence</p>
            </div>
            <div class="controls">
                <!-- Personal Weather Toggle -->
                <button class="personal-weather-toggle" id="personalWeatherBtn" onclick="togglePersonalWeather()">
                    <i class="fas fa-user-circle"></i>
                    <span>My Weather</span>
                </button>
                
                <!-- Theme Selector -->
                <div class="theme-selector">
                    <button class="theme-btn" onclick="toggleThemeDropdown()">
                        <i class="fas fa-palette"></i>
                        <span>Professional Themes</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="theme-dropdown" id="themeDropdown">
                        <div class="theme-option" onclick="changeTheme('corporate')">
                            <div class="theme-preview corporate"></div>
                            <div>
                                <div class="theme-name">Corporate Blue</div>
                                <div class="theme-description">Professional business theme</div>
                            </div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('executive')">
                            <div class="theme-preview executive"></div>
                            <div>
                                <div class="theme-name">Executive Dark</div>
                                <div class="theme-description">Premium executive style</div>
                            </div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('platinum')">
                            <div class="theme-preview platinum"></div>
                            <div>
                                <div class="theme-name">Platinum Steel</div>
                                <div class="theme-description">Modern metallic design</div>
                            </div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('midnight')">
                            <div class="theme-preview midnight"></div>
                            <div>
                                <div class="theme-name">Midnight Pro</div>
                                <div class="theme-description">Deep professional dark</div>
                            </div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('royal')">
                            <div class="theme-preview royal"></div>
                            <div>
                                <div class="theme-name">Royal Gradient</div>
                                <div class="theme-description">Elegant royal colors</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Search Section -->
        <section class="search-section">
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search any city worldwide..." id="searchInput">
                    <div class="search-suggestions" id="searchSuggestions"></div>
                </div>
                <button class="search-btn" onclick="searchWeather()">
                    <i class="fas fa-search"></i> Search
                </button>
                <button class="location-btn" onclick="getCurrentLocation()">
                    <i class="fas fa-location-dot"></i> My Location
                </button>
            </div>
            <div class="quick-search">
                <div class="quick-tag" onclick="searchCity('New York')">üóΩ New York</div>
                <div class="quick-tag" onclick="searchCity('London')">üá¨üáß London</div>
                <div class="quick-tag" onclick="searchCity('Tokyo')">üóæ Tokyo</div>
                <div class="quick-tag" onclick="searchCity('Paris')">üóº Paris</div>
                <div class="quick-tag" onclick="searchCity('Dubai')">üèúÔ∏è Dubai</div>
                <div class="quick-tag" onclick="searchCity('Sydney')">üá¶üá∫ Sydney</div>
                <div class="quick-tag" onclick="searchCity('Mumbai')">üáÆüá≥ Mumbai</div>
                <div class="quick-tag" onclick="searchCity('S√£o Paulo')">üáßüá∑ S√£o Paulo</div>
            </div>
        </section>

        <!-- Main Weather Card -->
        <section class="main-weather">
            <div class="weather-header">
                <div class="location-info">
                    <h1 id="locationName">New York, United States</h1>
                    <p id="currentDate">Monday, January 15, 2024</p>
                    <p class="coordinates" id="coordinates">40.7128¬∞N, 74.0060¬∞W</p>
                </div>
                <div class="weather-icon-container">
                    <div class="weather-glow"></div>
                    <i class="fas fa-sun weather-icon-main" id="mainWeatherIcon" style="color: #ffa726;"></i>
                </div>
            </div>
            <div class="temperature-section">
                <div class="temperature-main">
                    <div class="current-temp" id="currentTemp">22¬∞</div>
                    <div class="temp-controls">
                        <button class="unit-btn active" id="celsiusBtn" onclick="switchUnit('metric')">¬∞C</button>
                        <button class="unit-btn" id="fahrenheitBtn" onclick="switchUnit('imperial')">¬∞F</button>
                    </div>
                </div>
                <div class="weather-description">
                    <h2 id="weatherDescription">Clear Sky</h2>
                    <p class="feels-like" id="feelsLike">Feels like 25¬∞</p>
                    <span class="weather-tag" id="weatherTag">Pleasant</span>
                </div>
            </div>
        </section>

        <!-- Weather Details -->
        <section class="weather-details">
            <div class="detail-card">
                <div class="detail-icon">
                    <i class="fas fa-tint"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">Humidity</div>
                    <div class="detail-value" id="humidity">65%</div>
                    <div class="detail-progress">
                        <div class="progress-bar" id="humidityBar" style="width: 65%;"></div>
                    </div>
                </div>
            </div>
            <div class="detail-card">
                <div class="detail-icon">
                    <i class="fas fa-wind"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">Wind Speed</div>
                    <div class="detail-value" id="windSpeed">12 km/h</div>
                    <div class="detail-progress">
                        <div class="progress-bar" id="windBar" style="width: 24%;"></div>
                    </div>
                </div>
            </div>
            <div class="detail-card">
                <div class="detail-icon">
                    <i class="fas fa-thermometer-half"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">Pressure</div>
                    <div class="detail-value" id="pressure">1013 hPa</div>
                    <div class="detail-progress">
                        <div class="progress-bar" id="pressureBar" style="width: 63%;"></div>
                    </div>
                </div>
            </div>
            <div class="detail-card">
                <div class="detail-icon">
                    <i class="fas fa-eye"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">Visibility</div>
                    <div class="detail-value" id="visibility">10 km</div>
                    <div class="detail-progress">
                        <div class="progress-bar" id="visibilityBar" style="width: 100%;"></div>
                    </div>
                </div>
            </div>
            <div class="detail-card">
                <div class="detail-icon">
                    <i class="fas fa-sun"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">UV Index</div>
                    <div class="detail-value" id="uvIndex">5</div>
                    <div class="detail-progress">
                        <div class="progress-bar" id="uvBar" style="width: 45%;"></div>
                    </div>
                </div>
            </div>
            <div class="detail-card">
                <div class="detail-icon">
                    <i class="fas fa-cloud-rain"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">Precipitation</div>
                    <div class="detail-value" id="precipitation">0 mm</div>
                    <div class="detail-progress">
                        <div class="progress-bar" id="precipitationBar" style="width: 0%;"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 7-Day Forecast -->
        <section class="forecast-section">
            <h2 class="section-title">
                <i class="fas fa-calendar-week"></i>
                7-Day Professional Forecast
            </h2>
            <div class="forecast-grid" id="forecastGrid">
                <div class="forecast-card">
                    <div class="forecast-day">Today</div>
                    <div class="forecast-icon">‚òÄÔ∏è</div>
                    <div class="forecast-temps">
                        <span class="temp-high">25¬∞</span>
                        <span class="temp-low">18¬∞</span>
                    </div>
                    <div class="forecast-desc">Clear Sky</div>
                </div>
                <div class="forecast-card">
                    <div class="forecast-day">Tue</div>
                    <div class="forecast-icon">‚õÖ</div>
                    <div class="forecast-temps">
                        <span class="temp-high">23¬∞</span>
                        <span class="temp-low">16¬∞</span>
                    </div>
                    <div class="forecast-desc">Partly Cloudy</div>
                </div>
                <div class="forecast-card">
                    <div class="forecast-day">Wed</div>
                    <div class="forecast-icon">üåßÔ∏è</div>
                    <div class="forecast-temps">
                        <span class="temp-high">20¬∞</span>
                        <span class="temp-low">14¬∞</span>
                    </div>
                    <div class="forecast-desc">Light Rain</div>
                </div>
                <div class="forecast-card">
                    <div class="forecast-day">Thu</div>
                    <div class="forecast-icon">‚òÄÔ∏è</div>
                    <div class="forecast-temps">
                        <span class="temp-high">26¬∞</span>
                        <span class="temp-low">19¬∞</span>
                    </div>
                    <div class="forecast-desc">Sunny</div>
                </div>
                <div class="forecast-card">
                    <div class="forecast-day">Fri</div>
                    <div class="forecast-icon">‚õÖ</div>
                    <div class="forecast-temps">
                        <span class="temp-high">24¬∞</span>
                        <span class="temp-low">17¬∞</span>
                    </div>
                    <div class="forecast-desc">Cloudy</div>
                </div>
                <div class="forecast-card">
                    <div class="forecast-day">Sat</div>
                    <div class="forecast-icon">‚òÄÔ∏è</div>
                    <div class="forecast-temps">
                        <span class="temp-high">27¬∞</span>
                        <span class="temp-low">20¬∞</span>
                    </div>
                    <div class="forecast-desc">Clear</div>
                </div>
                <div class="forecast-card">
                    <div class="forecast-day">Sun</div>
                    <div class="forecast-icon">‚òÄÔ∏è</div>
                    <div class="forecast-temps">
                        <span class="temp-high">28¬∞</span>
                        <span class="temp-low">21¬∞</span>
                    </div>
                    <div class="forecast-desc">Sunny</div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Enhanced global weather database with corrected data
        const GLOBAL_WEATHER_DATA = {
            // North America
            'New York': { country: 'United States', temp: 22, desc: 'Clear Sky', humidity: 65, wind: 12, pressure: 1013, visibility: 10, uv: 5, precip: 0, coords: [40.7128, -74.0060], timezone: 'America/New_York' },
            'Los Angeles': { country: 'United States', temp: 24, desc: 'Sunny', humidity: 55, wind: 8, pressure: 1015, visibility: 15, uv: 8, precip: 0, coords: [34.0522, -118.2437], timezone: 'America/Los_Angeles' },
            'Chicago': { country: 'United States', temp: 18, desc: 'Partly Cloudy', humidity: 70, wind: 15, pressure: 1010, visibility: 12, uv: 4, precip: 0, coords: [41.8781, -87.6298], timezone: 'America/Chicago' },
            'Miami': { country: 'United States', temp: 28, desc: 'Hot and Humid', humidity: 80, wind: 10, pressure: 1012, visibility: 12, uv: 9, precip: 0, coords: [25.7617, -80.1918], timezone: 'America/New_York' },
            'Seattle': { country: 'United States', temp: 16, desc: 'Light Rain', humidity: 85, wind: 8, pressure: 1008, visibility: 8, uv: 3, precip: 5, coords: [47.6062, -122.3321], timezone: 'America/Los_Angeles' },
            'Las Vegas': { country: 'United States', temp: 32, desc: 'Very Hot', humidity: 25, wind: 6, pressure: 1018, visibility: 20, uv: 10, precip: 0, coords: [36.1699, -115.1398], timezone: 'America/Los_Angeles' },
            'Toronto': { country: 'Canada', temp: 15, desc: 'Overcast', humidity: 75, wind: 10, pressure: 1018, visibility: 8, uv: 3, precip: 2, coords: [43.6532, -79.3832], timezone: 'America/Toronto' },
            'Vancouver': { country: 'Canada', temp: 12, desc: 'Light Rain', humidity: 85, wind: 6, pressure: 1008, visibility: 6, uv: 2, precip: 8, coords: [49.2827, -123.1207], timezone: 'America/Vancouver' },
            'Montreal': { country: 'Canada', temp: 10, desc: 'Cool', humidity: 70, wind: 12, pressure: 1015, visibility: 10, uv: 3, precip: 1, coords: [45.5017, -73.5673], timezone: 'America/Toronto' },
            'Mexico City': { country: 'Mexico', temp: 24, desc: 'Clear', humidity: 55, wind: 7, pressure: 1020, visibility: 12, uv: 9, precip: 0, coords: [19.4326, -99.1332], timezone: 'America/Mexico_City' },

            // Europe
            'London': { country: 'United Kingdom', temp: 15, desc: 'Partly Cloudy', humidity: 78, wind: 8, pressure: 1020, visibility: 8, uv: 3, precip: 2, coords: [51.5074, -0.1278], timezone: 'Europe/London' },
            'Paris': { country: 'France', temp: 18, desc: 'Mild', humidity: 65, wind: 10, pressure: 1015, visibility: 12, uv: 5, precip: 0, coords: [48.8566, 2.3522], timezone: 'Europe/Paris' },
            'Berlin': { country: 'Germany', temp: 16, desc: 'Cloudy', humidity: 70, wind: 12, pressure: 1012, visibility: 10, uv: 4, precip: 1, coords: [52.5200, 13.4050], timezone: 'Europe/Berlin' },
            'Rome': { country: 'Italy', temp: 22, desc: 'Sunny', humidity: 60, wind: 5, pressure: 1018, visibility: 15, uv: 7, precip: 0, coords: [41.9028, 12.4964], timezone: 'Europe/Rome' },
            'Madrid': { country: 'Spain', temp: 25, desc: 'Hot', humidity: 45, wind: 8, pressure: 1022, visibility: 18, uv: 8, precip: 0, coords: [40.4168, -3.7038], timezone: 'Europe/Madrid' },
            'Amsterdam': { country: 'Netherlands', temp: 14, desc: 'Rainy', humidity: 85, wind: 14, pressure: 1005, visibility: 6, uv: 2, precip: 8, coords: [52.3676, 4.9041], timezone: 'Europe/Amsterdam' },
            'Stockholm': { country: 'Sweden', temp: 8, desc: 'Cool', humidity: 75, wind: 10, pressure: 1015, visibility: 12, uv: 2, precip: 2, coords: [59.3293, 18.0686], timezone: 'Europe/Stockholm' },
            'Moscow': { country: 'Russia', temp: 5, desc: 'Cold', humidity: 80, wind: 15, pressure: 1010, visibility: 8, uv: 1, precip: 3, coords: [55.7558, 37.6176], timezone: 'Europe/Moscow' },
            'Vienna': { country: 'Austria', temp: 19, desc: 'Pleasant', humidity: 65, wind: 6, pressure: 1018, visibility: 14, uv: 5, precip: 0, coords: [48.2082, 16.3738], timezone: 'Europe/Vienna' },
            'Zurich': { country: 'Switzerland', temp: 17, desc: 'Fresh', humidity: 70, wind: 8, pressure: 1020, visibility: 15, uv: 4, precip: 1, coords: [47.3769, 8.5417], timezone: 'Europe/Zurich' },

            // Asia
            'Tokyo': { country: 'Japan', temp: 20, desc: 'Mild', humidity: 75, wind: 8, pressure: 1015, visibility: 12, uv: 6, precip: 1, coords: [35.6762, 139.6503], timezone: 'Asia/Tokyo' },
            'Beijing': { country: 'China', temp: 18, desc: 'Hazy', humidity: 60, wind: 10, pressure: 1016, visibility: 6, uv: 5, precip: 0, coords: [39.9042, 116.4074], timezone: 'Asia/Shanghai' },
            'Shanghai': { country: 'China', temp: 24, desc: 'Humid', humidity: 80, wind: 12, pressure: 1012, visibility: 10, uv: 6, precip: 2, coords: [31.2304, 121.4737], timezone: 'Asia/Shanghai' },
            'Mumbai': { country: 'India', temp: 32, desc: 'Hot and Humid', humidity: 85, wind: 15, pressure: 1008, visibility: 8, uv: 10, precip: 0, coords: [19.0760, 72.8777], timezone: 'Asia/Kolkata' },
            'Delhi': { country: 'India', temp: 35, desc: 'Very Hot', humidity: 40, wind: 8, pressure: 1010, visibility: 6, uv: 11, precip: 0, coords: [28.7041, 77.1025], timezone: 'Asia/Kolkata' },
            'Bangkok': { country: 'Thailand', temp: 34, desc: 'Tropical', humidity: 85, wind: 6, pressure: 1006, visibility: 8, uv: 9, precip: 5, coords: [13.7563, 100.5018], timezone: 'Asia/Bangkok' },
            'Singapore': { country: 'Singapore', temp: 30, desc: 'Tropical', humidity: 90, wind: 8, pressure: 1010, visibility: 10, uv: 8, precip: 3, coords: [1.3521, 103.8198], timezone: 'Asia/Singapore' },
            'Seoul': { country: 'South Korea', temp: 18, desc: 'Clear', humidity: 65, wind: 10, pressure: 1020, visibility: 15, uv: 5, precip: 0, coords: [37.5665, 126.9780], timezone: 'Asia/Seoul' },
            'Hong Kong': { country: 'Hong Kong', temp: 26, desc: 'Humid', humidity: 85, wind: 12, pressure: 1012, visibility: 10, uv: 7, precip: 2, coords: [22.3193, 114.1694], timezone: 'Asia/Hong_Kong' },
            'Kuala Lumpur': { country: 'Malaysia', temp: 32, desc: 'Hot and Humid', humidity: 90, wind: 5, pressure: 1008, visibility: 8, uv: 9, precip: 8, coords: [3.1390, 101.6869], timezone: 'Asia/Kuala_Lumpur' },

            // Middle East & Africa
            'Dubai': { country: 'UAE', temp: 38, desc: 'Very Hot', humidity: 60, wind: 8, pressure: 1012, visibility: 15, uv: 11, precip: 0, coords: [25.2048, 55.2708], timezone: 'Asia/Dubai' },
            'Cairo': { country: 'Egypt', temp: 30, desc: 'Hot and Dry', humidity: 30, wind: 12, pressure: 1015, visibility: 10, uv: 9, precip: 0, coords: [30.0444, 31.2357], timezone: 'Africa/Cairo' },
            'Cape Town': { country: 'South Africa', temp: 20, desc: 'Windy', humidity: 65, wind: 25, pressure: 1018, visibility: 15, uv: 7, precip: 0, coords: [-33.9249, 18.4241], timezone: 'Africa/Johannesburg' },
            'Lagos': { country: 'Nigeria', temp: 29, desc: 'Humid', humidity: 85, wind: 8, pressure: 1010, visibility: 8, uv: 8, precip: 5, coords: [6.5244, 3.3792], timezone: 'Africa/Lagos' },
            'Riyadh': { country: 'Saudi Arabia', temp: 42, desc: 'Extremely Hot', humidity: 20, wind: 10, pressure: 1008, visibility: 12, uv: 12, precip: 0, coords: [24.7136, 46.6753], timezone: 'Asia/Riyadh' },
            'Tel Aviv': { country: 'Israel', temp: 26, desc: 'Warm', humidity: 70, wind: 12, pressure: 1015, visibility: 12, uv: 8, precip: 0, coords: [32.0853, 34.7818], timezone: 'Asia/Jerusalem' },

            // Oceania
            'Sydney': { country: 'Australia', temp: 22, desc: 'Pleasant', humidity: 65, wind: 15, pressure: 1018, visibility: 15, uv: 7, precip: 0, coords: [-33.8688, 151.2093], timezone: 'Australia/Sydney' },
            'Melbourne': { country: 'Australia', temp: 18, desc: 'Variable', humidity: 70, wind: 20, pressure: 1015, visibility: 12, uv: 5, precip: 3, coords: [-37.8136, 144.9631], timezone: 'Australia/Melbourne' },
            'Brisbane': { country: 'Australia', temp: 25, desc: 'Subtropical', humidity: 75, wind: 12, pressure: 1016, visibility: 14, uv: 8, precip: 2, coords: [-27.4698, 153.0251], timezone: 'Australia/Brisbane' },
            'Perth': { country: 'Australia', temp: 24, desc: 'Mediterranean', humidity: 60, wind: 18, pressure: 1020, visibility: 16, uv: 8, precip: 0, coords: [-31.9505, 115.8605], timezone: 'Australia/Perth' },
            'Auckland': { country: 'New Zealand', temp: 16, desc: 'Mild', humidity: 75, wind: 15, pressure: 1020, visibility: 15, uv: 4, precip: 2, coords: [-36.8485, 174.7633], timezone: 'Pacific/Auckland' },

            // South America
            'S√£o Paulo': { country: 'Brazil', temp: 23, desc: 'Subtropical', humidity: 75, wind: 8, pressure: 1012, visibility: 12, uv: 7, precip: 2, coords: [-23.5505, -46.6333], timezone: 'America/Sao_Paulo' },
            'Rio de Janeiro': { country: 'Brazil', temp: 28, desc: 'Tropical', humidity: 80, wind: 10, pressure: 1015, visibility: 12, uv: 9, precip: 1, coords: [-22.9068, -43.1729], timezone: 'America/Sao_Paulo' },
            'Buenos Aires': { country: 'Argentina', temp: 20, desc: 'Temperate', humidity: 70, wind: 12, pressure: 1018, visibility: 14, uv: 6, precip: 1, coords: [-34.6118, -58.3960], timezone: 'America/Argentina/Buenos_Aires' },
            'Lima': { country: 'Peru', temp: 18, desc: 'Coastal', humidity: 85, wind: 8, pressure: 1016, visibility: 8, uv: 6, precip: 0, coords: [-12.0464, -77.0428], timezone: 'America/Lima' },
            'Santiago': { country: 'Chile', temp: 19, desc: 'Mediterranean', humidity: 60, wind: 10, pressure: 1020, visibility: 15, uv: 7, precip: 0, coords: [-33.4489, -70.6693], timezone: 'America/Santiago' },
            'Bogot√°': { country: 'Colombia', temp: 15, desc: 'Cool Mountain', humidity: 80, wind: 6, pressure: 1025, visibility: 10, uv: 8, precip: 3, coords: [4.7110, -74.0721], timezone: 'America/Bogota' },

            // Additional Major Cities
            'Istanbul': { country: 'Turkey', temp: 21, desc: 'Mediterranean', humidity: 70, wind: 12, pressure: 1016, visibility: 12, uv: 6, precip: 1, coords: [41.0082, 28.9784], timezone: 'Europe/Istanbul' },
            'Athens': { country: 'Greece', temp: 26, desc: 'Hot and Dry', humidity: 50, wind: 15, pressure: 1020, visibility: 16, uv: 8, precip: 0, coords: [37.9838, 23.7275], timezone: 'Europe/Athens' },
            'Lisbon': { country: 'Portugal', temp: 22, desc: 'Atlantic', humidity: 65, wind: 14, pressure: 1018, visibility: 14, uv: 7, precip: 0, coords: [38.7223, -9.1393], timezone: 'Europe/Lisbon' },
            'Warsaw': { country: 'Poland', temp: 14, desc: 'Continental', humidity: 75, wind: 10, pressure: 1015, visibility: 10, uv: 3, precip: 2, coords: [52.2297, 21.0122], timezone: 'Europe/Warsaw' },
            'Prague': { country: 'Czech Republic', temp: 16, desc: 'Central European', humidity: 70, wind: 8, pressure: 1018, visibility: 12, uv: 4, precip: 1, coords: [50.0755, 14.4378], timezone: 'Europe/Prague' },
            'Budapest': { country: 'Hungary', temp: 18, desc: 'Continental', humidity: 65, wind: 9, pressure: 1017, visibility: 13, uv: 5, precip: 1, coords: [47.4979, 19.0402], timezone: 'Europe/Budapest' },
            'Oslo': { country: 'Norway', temp: 10, desc: 'Nordic', humidity: 80, wind: 12, pressure: 1012, visibility: 12, uv: 2, precip: 4, coords: [59.9139, 10.7522], timezone: 'Europe/Oslo' },
            'Helsinki': { country: 'Finland', temp: 8, desc: 'Baltic', humidity: 85, wind: 15, pressure: 1010, visibility: 10, uv: 2, precip: 3, coords: [60.1699, 24.9384], timezone: 'Europe/Helsinki' },
            'Copenhagen': { country: 'Denmark', temp: 12, desc: 'Maritime', humidity: 80, wind: 16, pressure: 1014, visibility: 11, uv: 3, precip: 2, coords: [55.6761, 12.5683], timezone: 'Europe/Copenhagen' },
            'Brussels': { country: 'Belgium', temp: 15, desc: 'Oceanic', humidity: 78, wind: 11, pressure: 1016, visibility: 9, uv: 3, precip: 3, coords: [50.8503, 4.3517], timezone: 'Europe/Brussels' }
        };

        // Global state
        let currentUnit = 'metric';
        let currentWeatherData = null;
        let personalWeatherEnabled = false;
        let userLocation = null;
        let isLoading = false;

        // Weather icons mapping
        const WEATHER_ICONS = {
            'clear': 'fas fa-sun',
            'clear sky': 'fas fa-sun',
            'sunny': 'fas fa-sun',
            'partly cloudy': 'fas fa-cloud-sun',
            'cloudy': 'fas fa-cloud',
            'overcast': 'fas fa-cloud',
            'rainy': 'fas fa-cloud-rain',
            'light rain': 'fas fa-cloud-drizzle',
            'heavy rain': 'fas fa-cloud-showers-heavy',
            'thunderstorms': 'fas fa-bolt',
            'tropical': 'fas fa-cloud-rain',
            'snow': 'fas fa-snowflake',
            'heavy snow': 'fas fa-snowflake',
            'foggy': 'fas fa-smog',
            'hazy': 'fas fa-smog',
            'dusty': 'fas fa-smog',
            'windy': 'fas fa-wind',
            'hot': 'fas fa-temperature-high',
            'very hot': 'fas fa-temperature-high',
            'extremely hot': 'fas fa-temperature-high',
            'cold': 'fas fa-temperature-low',
            'cool': 'fas fa-thermometer-quarter',
            'mild': 'fas fa-thermometer-half',
            'pleasant': 'fas fa-sun',
            'fresh': 'fas fa-wind',
            'humid': 'fas fa-tint',
            'hot and humid': 'fas fa-temperature-high',
            'hot and dry': 'fas fa-sun',
            'variable': 'fas fa-cloud-sun',
            'subtropical': 'fas fa-cloud-sun',
            'mediterranean': 'fas fa-sun',
            'temperate': 'fas fa-cloud-sun',
            'coastal': 'fas fa-water',
            'continental': 'fas fa-cloud',
            'oceanic': 'fas fa-cloud',
            'maritime': 'fas fa-cloud',
            'atlantic': 'fas fa-water',
            'nordic': 'fas fa-snowflake',
            'baltic': 'fas fa-cloud',
            'cool mountain': 'fas fa-mountain',
            'warm': 'fas fa-thermometer-half'
        };

        const WEATHER_COLORS = {
            'clear': '#ffa726',
            'clear sky': '#ffa726',
            'sunny': '#ffa726',
            'partly cloudy': '#78909c',
            'cloudy': '#78909c',
            'overcast': '#607d8b',
            'rainy': '#42a5f5',
            'light rain': '#64b5f6',
            'heavy rain': '#1976d2',
            'thunderstorms': '#5c6bc0',
            'tropical': '#42a5f5',
            'snow': '#e1f5fe',
            'heavy snow': '#b3e5fc',
            'foggy': '#90a4ae',
            'hazy': '#90a4ae',
            'dusty': '#8d6e63',
            'windy': '#26c6da',
            'hot': '#ff5722',
            'very hot': '#d32f2f',
            'extremely hot': '#b71c1c',
            'cold': '#2196f3',
            'cool': '#4fc3f7',
            'mild': '#66bb6a',
            'pleasant': '#4caf50',
            'fresh': '#26c6da',
            'humid': '#42a5f5',
            'hot and humid': '#ff7043',
            'hot and dry': '#ff9800',
            'variable': '#78909c',
            'subtropical': '#66bb6a',
            'mediterranean': '#ffa726',
            'temperate': '#4caf50',
            'coastal': '#26c6da',
            'continental': '#78909c',
            'oceanic': '#42a5f5',
            'maritime': '#4fc3f7',
            'atlantic': '#1976d2',
            'nordic': '#81c784',
            'baltic': '#4fc3f7',
            'cool mountain': '#81c784',
            'warm': '#66bb6a'
        };

        // Initialize app
        function initializeApp() {
            showLoading();
            updateCurrentDate();
            loadThemePreference();
            loadPersonalWeatherPreference();
            setupEventListeners();
            createParticleSystem();
            
            setTimeout(() => {
                if (personalWeatherEnabled && userLocation) {
                    loadPersonalWeather();
                } else {
                    searchCity('New York');
                }
                hideLoading();
            }, 2000);
        }

        function showLoading() {
            isLoading = true;
            document.getElementById('loadingOverlay').classList.remove('hidden');
        }

        function hideLoading() {
            isLoading = false;
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.add('hidden');
            }, 500);
        }

        function createParticleSystem() {
            const particleSystem = document.getElementById('particleSystem');
            
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                particleSystem.appendChild(particle);
            }
        }

        function setupEventListeners() {
            // Search functionality
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchWeather();
                }
            });

            document.getElementById('searchInput').addEventListener('input', debounce(handleSearchInput, 300));
            document.getElementById('searchInput').addEventListener('focus', showSearchSuggestions);
            document.getElementById('searchInput').addEventListener('blur', () => {
                setTimeout(hideSearchSuggestions, 200);
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.theme-selector')) {
                    hideThemeDropdown();
                }
                if (!e.target.closest('.search-box')) {
                    hideSearchSuggestions();
                }
            });
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', options);
        }

        // Theme Management
        function toggleThemeDropdown() {
            const dropdown = document.getElementById('themeDropdown');
            dropdown.classList.toggle('show');
        }

        function hideThemeDropdown() {
            const dropdown = document.getElementById('themeDropdown');
            dropdown.classList.remove('show');
        }

        function changeTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('weatherTheme', theme);
            hideThemeDropdown();
            
            // Add theme transition effect
            document.body.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
            setTimeout(() => {
                document.body.style.transition = '';
            }, 800);
        }

        function loadThemePreference() {
            const savedTheme = localStorage.getItem('weatherTheme') || 'corporate';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        // Personal Weather Management
        function togglePersonalWeather() {
            personalWeatherEnabled = !personalWeatherEnabled;
            const btn = document.getElementById('personalWeatherBtn');
            
            if (personalWeatherEnabled) {
                btn.classList.add('active');
                btn.innerHTML = '<i class="fas fa-user-check"></i><span>Personal Weather</span>';
                localStorage.setItem('personalWeatherEnabled', 'true');
                getCurrentLocation();
            } else {
                btn.classList.remove('active');
                btn.innerHTML = '<i class="fas fa-user-circle"></i><span>My Weather</span>';
                localStorage.setItem('personalWeatherEnabled', 'false');
                userLocation = null;
                localStorage.removeItem('userLocation');
            }
        }

        function loadPersonalWeatherPreference() {
            personalWeatherEnabled = localStorage.getItem('personalWeatherEnabled') === 'true';
            const savedLocation = localStorage.getItem('userLocation');
            
            if (savedLocation) {
                userLocation = JSON.parse(savedLocation);
            }
            
            const btn = document.getElementById('personalWeatherBtn');
            if (personalWeatherEnabled) {
                btn.classList.add('active');
                btn.innerHTML = '<i class="fas fa-user-check"></i><span>Personal Weather</span>';
            }
        }

        function loadPersonalWeather() {
            if (userLocation) {
                const closestCity = findClosestCity(userLocation.lat, userLocation.lon);
                if (closestCity) {
                    searchCity(closestCity);
                    setTimeout(() => {
                        const locationElement = document.getElementById('locationName');
                        locationElement.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${locationElement.textContent} (Your Location)`;
                    }, 100);
                }
            }
        }

        function findClosestCity(lat, lon) {
            let closestCity = null;
            let minDistance = Infinity;
            
            Object.entries(GLOBAL_WEATHER_DATA).forEach(([city, data]) => {
                const distance = calculateDistance(lat, lon, data.coords[0], data.coords[1]);
                if (distance < minDistance) {
                    minDistance = distance;
                    closestCity = city;
                }
            });
            
            return closestCity;
        }

        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                    Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // Search functionality
        function handleSearchInput(e) {
            const query = e.target.value.trim().toLowerCase();
            if (query.length < 2) {
                hideSearchSuggestions();
                return;
            }

            const suggestions = generateSearchSuggestions(query);
            displaySearchSuggestions(suggestions);
        }

        function generateSearchSuggestions(query) {
            const suggestions = [];

            Object.entries(GLOBAL_WEATHER_DATA).forEach(([city, data]) => {
                if (city.toLowerCase().includes(query) || data.country.toLowerCase().includes(query)) {
                    suggestions.push({
                        city: city,
                        country: data.country,
                        fullName: `${city}, ${data.country}`
                    });
                }
            });

            return suggestions.slice(0, 8);
        }

        function displaySearchSuggestions(suggestions) {
            const suggestionsContainer = document.getElementById('searchSuggestions');
            
            if (suggestions.length === 0) {
                hideSearchSuggestions();
                return;
            }

            const suggestionsHTML = suggestions.map(suggestion => `
                <div class="suggestion-item" onclick="searchCity('${suggestion.city}')">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>${suggestion.fullName}</span>
                </div>
            `).join('');

            suggestionsContainer.innerHTML = suggestionsHTML;
            suggestionsContainer.style.display = 'block';
        }

        function showSearchSuggestions() {
            const input = document.getElementById('searchInput');
            if (input.value.trim().length >= 2) {
                handleSearchInput({ target: input });
            }
        }

        function hideSearchSuggestions() {
            document.getElementById('searchSuggestions').style.display = 'none';
        }

        function searchWeather() {
            const input = document.getElementById('searchInput');
            const cityName = input.value.trim();
            
            if (cityName && !isLoading) {
                showLoading();
                setTimeout(() => {
                    searchCity(cityName);
                    input.value = '';
                    hideSearchSuggestions();
                    hideLoading();
                }, 1000);
            }
        }

        function searchCity(cityName) {
            const data = GLOBAL_WEATHER_DATA[cityName];
            if (data) {
                updateWeatherDisplay(cityName, data);
                addCityAnimation();
            } else {
                const partialMatch = Object.keys(GLOBAL_WEATHER_DATA).find(city => 
                    city.toLowerCase().includes(cityName.toLowerCase()) ||
                    cityName.toLowerCase().includes(city.toLowerCase())
                );
                
                if (partialMatch) {
                    updateWeatherDisplay(partialMatch, GLOBAL_WEATHER_DATA[partialMatch]);
                    addCityAnimation();
                } else {
                    const aiGeneratedData = generateAIWeatherData(cityName);
                    updateWeatherDisplay(cityName, aiGeneratedData);
                    addCityAnimation();
                }
            }
        }

        function generateAIWeatherData(cityName) {
            const weatherPatterns = [
                { desc: 'Clear Sky', temp: 22, humidity: 60, wind: 8, pressure: 1015, uv: 6, precip: 0 },
                { desc: 'Partly Cloudy', temp: 18, humidity: 70, wind: 12, pressure: 1012, uv: 4, precip: 1 },
                { desc: 'Sunny', temp: 26, humidity: 50, wind: 6, pressure: 1018, uv: 8, precip: 0 },
                { desc: 'Light Rain', temp: 16, humidity: 85, wind: 10, pressure: 1008, uv: 2, precip: 5 },
                { desc: 'Cloudy', temp: 14, humidity: 75, wind: 14, pressure: 1010, uv: 3, precip: 2 }
            ];

            const randomPattern = weatherPatterns[Math.floor(Math.random() * weatherPatterns.length)];
            
            return {
                country: 'World',
                temp: randomPattern.temp + Math.floor(Math.random() * 10) - 5,
                desc: randomPattern.desc,
                humidity: Math.max(20, Math.min(95, randomPattern.humidity + Math.floor(Math.random() * 20) - 10)),
                wind: Math.max(0, randomPattern.wind + Math.floor(Math.random() * 8) - 4),
                pressure: randomPattern.pressure + Math.floor(Math.random() * 20) - 10,
                visibility: Math.floor(Math.random() * 10) + 8,
                uv: Math.max(0, Math.min(12, randomPattern.uv + Math.floor(Math.random() * 4) - 2)),
                precip: Math.max(0, randomPattern.precip + Math.floor(Math.random() * 5)),
                coords: [(Math.random() - 0.5) * 180, (Math.random() - 0.5) * 360],
                timezone: 'UTC'
            };
        }

        function addCityAnimation() {
            const mainWeather = document.querySelector('.main-weather');
            mainWeather.style.transform = 'scale(0.95)';
            setTimeout(() => {
                mainWeather.style.transform = 'scale(1)';
            }, 200);
        }

        function getCurrentLocation() {
            if (navigator.geolocation) {
                showLoading();
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lon: position.coords.longitude
                        };
                        localStorage.setItem('userLocation', JSON.stringify(userLocation));
                        
                        if (personalWeatherEnabled) {
                            loadPersonalWeather();
                        } else {
                            const closestCity = findClosestCity(userLocation.lat, userLocation.lon);
                            if (closestCity) {
                                searchCity(closestCity);
                            }
                        }
                        hideLoading();
                    },
                    (error) => {
                        console.error('Geolocation error:', error);
                        alert('‚ùå Location access denied. Showing default location.');
                        searchCity('New York');
                        hideLoading();
                    }
                );
            } else {
                alert('‚ùå Geolocation not supported. Showing default location.');
                searchCity('New York');
            }
        }

        function updateWeatherDisplay(cityName, data) {
            // Update location
            document.getElementById('locationName').textContent = `${cityName}, ${data.country}`;
            document.getElementById('coordinates').textContent = `${data.coords[0].toFixed(4)}¬∞N, ${Math.abs(data.coords[1]).toFixed(4)}¬∞${data.coords[1] >= 0 ? 'E' : 'W'}`;
            
            // Fixed temperature conversion
            let temp, feelsLike;
            if (currentUnit === 'metric') {
                temp = Math.round(data.temp);
                feelsLike = Math.round(data.temp + 3);
            } else {
                temp = Math.round(data.temp * 9/5 + 32);
                feelsLike = Math.round((data.temp + 3) * 9/5 + 32);
            }
            
            const unit = currentUnit === 'metric' ? '¬∞C' : '¬∞F';
            
            // Animate temperature change
            animateValue(document.getElementById('currentTemp'), 0, temp, 1500, '¬∞');
            document.getElementById('feelsLike').textContent = `Feels like ${feelsLike}${unit}`;
            
            // Update weather description
            document.getElementById('weatherDescription').textContent = data.desc;
            
            // Update weather icon
            const iconClass = WEATHER_ICONS[data.desc.toLowerCase()] || 'fas fa-sun';
            const iconColor = WEATHER_COLORS[data.desc.toLowerCase()] || '#ffa726';
            const iconElement = document.getElementById('mainWeatherIcon');
            iconElement.className = `${iconClass} weather-icon-main`;
            iconElement.style.color = iconColor;
            
            // Update weather tag
            const tag = getWeatherTag(temp);
            document.getElementById('weatherTag').textContent = tag;
            
            // Update details with animations
            animateValue(document.getElementById('humidity'), 0, data.humidity, 1200, '%');
            animateValue(document.getElementById('windSpeed'), 0, data.wind, 1200, ' km/h');
            animateValue(document.getElementById('pressure'), 900, data.pressure, 1200, ' hPa');
            animateValue(document.getElementById('visibility'), 0, data.visibility, 1200, ' km');
            animateValue(document.getElementById('uvIndex'), 0, data.uv, 1200, '');
            animateValue(document.getElementById('precipitation'), 0, data.precip, 1200, ' mm');
            
            // Update progress bars with delays
            setTimeout(() => updateProgressBar('humidityBar', data.humidity), 200);
            setTimeout(() => updateProgressBar('windBar', Math.min((data.wind / 50) * 100, 100)), 400);
            setTimeout(() => updateProgressBar('pressureBar', ((data.pressure - 950) / 100) * 100), 600);
            setTimeout(() => updateProgressBar('visibilityBar', Math.min((data.visibility / 20) * 100, 100)), 800);
            setTimeout(() => updateProgressBar('uvBar', (data.uv / 12) * 100), 1000);
            setTimeout(() => updateProgressBar('precipitationBar', Math.min((data.precip / 20) * 100, 100)), 1200);
            
            // Update background
            updateWeatherBackground(data.desc.toLowerCase());
            
            currentWeatherData = { cityName, data };
        }

        function animateValue(element, start, end, duration, suffix = '') {
            const startTime = performance.now();
            const difference = end - start;

            function updateValue(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeOutCubic = 1 - Math.pow(1 - progress, 3);
                const currentValue = start + difference * easeOutCubic;

                element.textContent = Math.round(currentValue) + suffix;

                if (progress < 1) {
                    requestAnimationFrame(updateValue);
                }
            }

            requestAnimationFrame(updateValue);
        }

        function updateProgressBar(barId, percentage) {
            const bar = document.getElementById(barId);
            if (bar) {
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = Math.min(Math.max(percentage, 0), 100) + '%';
                }, 100);
            }
        }

        function getWeatherTag(temp) {
            if (currentUnit === 'imperial') {
                if (temp > 104) return 'Extremely Hot';
                if (temp > 95) return 'Very Hot';
                if (temp > 86) return 'Hot';
                if (temp > 77) return 'Warm';
                if (temp > 68) return 'Pleasant';
                if (temp > 59) return 'Mild';
                if (temp > 50) return 'Cool';
                if (temp > 41) return 'Cold';
                if (temp > 32) return 'Very Cold';
                return 'Freezing';
            } else {
                if (temp > 40) return 'Extremely Hot';
                if (temp > 35) return 'Very Hot';
                if (temp > 30) return 'Hot';
                if (temp > 25) return 'Warm';
                if (temp > 20) return 'Pleasant';
                if (temp > 15) return 'Mild';
                if (temp > 10) return 'Cool';
                if (temp > 5) return 'Cold';
                if (temp > 0) return 'Very Cold';
                return 'Freezing';
            }
        }

        function updateWeatherBackground(weatherType) {
            const backgroundGradients = {
                'clear': 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'clear sky': 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'sunny': 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'partly cloudy': 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'cloudy': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'overcast': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'rainy': 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
                'light rain': 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'thunderstorms': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'snow': 'linear-gradient(135deg, #e6dee9 0%, #a8edea 100%)',
                'foggy': 'linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)',
                'hazy': 'linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)',
                'hot': 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
                'very hot': 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',
                'extremely hot': 'linear-gradient(135deg, #ff6b6b 0%, #feca57 100%)',
                'tropical': 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)'
            };
            
            const gradient = backgroundGradients[weatherType] || backgroundGradients['clear'];
            document.body.style.background = gradient;
        }

        function switchUnit(unit) {
            if (unit === currentUnit || isLoading) return;
            
            currentUnit = unit;
            
            // Update button states with animation
            const celsiusBtn = document.getElementById('celsiusBtn');
            const fahrenheitBtn = document.getElementById('fahrenheitBtn');
            
            celsiusBtn.classList.toggle('active', unit === 'metric');
            fahrenheitBtn.classList.toggle('active', unit === 'imperial');
            
            // Update display if we have current data
            if (currentWeatherData) {
                updateWeatherDisplay(currentWeatherData.cityName, currentWeatherData.data);
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);

        console.log('üå§Ô∏è WeatherPro Professional Dashboard loaded successfully!');
        console.log(`üåç Supporting ${Object.keys(GLOBAL_WEATHER_DATA).length} cities worldwide with AI-powered data!`);
    </script>
</body>
</html>
